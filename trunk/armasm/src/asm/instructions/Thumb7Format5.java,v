head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2003.02.20.15.38.40;	author hans;	state Exp;
branches;
next	1.2;

1.2
date	2003.02.07.18.18.41;	author hans;	state Exp;
branches;
next	1.1;

1.1
date	2003.02.03.16.47.12;	author hans;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Thumb support updates
@
text
@package asm.instructions;

public class Thumb7Format5 extends Thumb7Instruction {
    public Thumb7Format5(ParsedInstruction pi) {
        super(pi);
        java.util.Vector opcodes = pi.getOpcodes();
        set(14);
        set(10);
        
        if(((String)opcodes.elementAt(0)).equals("BX")) {
            // BX Rs or BX Hs
            int rs = getRegisterNumber((String)opcodes.elementAt(1));
            if (rs > 7 ) {
                set(6); //Hs
            }
            int i = 1;
            for ( int bit = 3; bit <= 5; bit++ ) {
                if ( ( rs & i ) == i ) {
                    set(bit);
                }
                i = i * 2;
            }
        } else {
            // Rd
            int rd = getRegisterNumber((String)opcodes.elementAt(1));
            if (rd > 7 ) {
                set(7);
            }
            set(3, 0, rd);
            int i = 1;
            for ( int bit = 0; bit <= 3; bit++ ) {
                if ( ( rd & i ) == i ) {
                    set(bit);
                }
                i = i * 2;
            }
            
            //Rs
            int rs = getRegisterNumber((String)opcodes.elementAt(2));
            if (rs > 7 ) {
                set(6);
            }
            i = 1;
            for ( int bit = 3; bit <= 5; bit++ ) {
                if ( ( rs & i ) == i ) {
                    set(bit);
                }
                i = i * 2;
            }
        }
    }
}
@


1.2
log
@Thumb7 support update
@
text
@d29 1
@


1.1
log
@*** empty log message ***
@
text
@d7 43
@

